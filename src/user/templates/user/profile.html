{% extends '_layout.html' %}
{% load static %}

{% block jsBlock %}
    <!-- Datatables -->
    <script src="{% static 'assets/vendors/datatables.net/js/jquery.dataTables.min.js' %}"></script>
    <script src="{% static 'assets/vendors/datatables.net-bs/js/dataTables.bootstrap.min.js' %}"></script>
    <script src="{% static 'assets/vendors/datatables.net-buttons/js/dataTables.buttons.min.js' %}"></script>
    <script src="{% static 'assets/vendors/datatables.net-buttons-bs/js/buttons.bootstrap.min.js' %}"></script>
    <script src="{% static 'assets/vendors/datatables.net-buttons/js/buttons.flash.min.js' %}"></script>
    <script src="{% static 'assets/vendors/datatables.net-buttons/js/buttons.html5.min.js' %}"></script>
    <script src="{% static 'assets/vendors/datatables.net-buttons/js/buttons.print.min.js' %}"></script>
    <script src="{% static 'assets/vendors/datatables.net-fixedheader/js/dataTables.fixedHeader.min.js' %}"></script>
    <script src="{% static 'assets/vendors/datatables.net-keytable/js/dataTables.keyTable.min.js' %}"></script>
    <script src="{% static 'assets/vendors/datatables.net-responsive/js/dataTables.responsive.min.js' %}"></script>
    <script src="{% static 'assets/vendors/datatables.net-responsive-bs/js/responsive.bootstrap.js' %}"></script>
    <script src="{% static 'assets/vendors/datatables.net-scroller/js/dataTables.scroller.min.js' %}"></script>
    <script src="{% static 'assets/vendors/jszip/dist/jszip.min.js' %}"></script>
    <script src="{% static 'assets/vendors/pdfmake/build/pdfmake.min.js' %}"></script>
    <script src="{% static 'assets/vendors/pdfmake/build/vfs_fonts.js' %}"></script>
    <script src="{% static 'assets/vendors/select2/dist/js/select2.min.js' %}"></script>
    <script>
        $('input').addClass('form-control');
    </script>


    <script>
        $("#id_birthday_age").addClass('hidden');
    </script>

    <script>
        function normalizeDate(dateInt) {
        return dateInt.substring(0, 4) + '/' + dateInt.substring(4, 6) + '/' + dateInt.substring(6, 8);
        ;}
        document.getElementById("fromDate1").value=normalizeDate(document.getElementById("id_birthday_age").value)
        
    </script>

<script>
$('#id_last_name').keypress(function (e) {
        var regex = new RegExp(/^[\u0600-\u06FF\s]+$/);
        var str = String.fromCharCode(!e.charCode ? e.which : e.charCode);
        if (regex.test(str)) {
            return true;
        }
        else {
            e.preventDefault();
            return false;
        }
    });
    $('#id_first_name').keypress(function (e) {
        var regex = new RegExp(/^[\u0600-\u06FF\s]+$/);
        var str = String.fromCharCode(!e.charCode ? e.which : e.charCode);
        if (regex.test(str)) {
            return true;
        }
        else {
            e.preventDefault();
            return false;
        }
    });
    $('#id_mobileNumber').on('input', function (event) { 
    this.value = this.value.replace(/[^0-9]/g, '');
    });
    </script>
{% if successfullsave %}
<script>
$('#myModal').modal('show');
</script>
{% endif %}

<script>
    $("#id_birthdate").hide();
</script>
{% endblock %}

{% block cssBlock %}
    <!-- Datatables -->

    <link href="{% static 'assets/vendors/select2/dist/css/select2.min.css' %}" rel="stylesheet" />
    <link href="{% static 'assets/vendors/datatables.net-bs/css/dataTables.bootstrap.min.css' %}" rel="stylesheet">
    <link href="{% static 'assets/vendors/datatables.net-buttons-bs/css/buttons.bootstrap.min.css' %}" rel="stylesheet">
    <link href="{% static 'assets/vendors/datatables.net-fixedheader-bs/css/fixedHeader.bootstrap.min.css' %}"
          rel="stylesheet">
    <link href="{% static 'assets/vendors/datatables.net-responsive-bs/css/responsive.bootstrap.min.css' %}"
          rel="stylesheet">
    <link href="{% static 'assets/vendors/datatables.net-scroller-bs/css/scroller.bootstrap.min.css' %}"
          rel="stylesheet">

          <style>
            .hide{
              display:none;
            }
            </style>
            <style>
                .tree,
                .tree ul {
                    margin: 0;
                    padding: 0;
                    list-style: none
                }
        
                .tree ul {
                    margin-left: 1em;
                    position: relative
                }
        
                .tree ul ul {
                    margin-left: .5em
                }
        
                .tree ul:before {
                    content: "";
                    display: block;
                    width: 0;
                    position: absolute;
                    top: 0;
                    bottom: 0;
                    left: 0;
                    border-left: 1px solid
                }
        
                .tree li {
                    margin: 0;
                    padding: 0 1em;
                    line-height: 2em;
                    color: #369;
                    font-weight: 700;
                    position: relative
                }
        
                .tree ul li:before {
                    content: "";
                    display: block;
                    width: 10px;
                    height: 0;
                    border-top: 1px solid;
                    margin-top: -1px;
                    position: absolute;
                    top: 1em;
                    left: 0
                }
        
                .tree ul li:last-child:before {
                    background: #fff;
                    height: auto;
                    top: 1em;
                    bottom: 0
                }
        
                .indicator {
                    margin-right: 5px;
                }
        
                .tree li a {
                    text-decoration: none;
                    color: #369;
                }
        
                .tree li button,
                .tree li button:active,
                .tree li button:focus {
                    text-decoration: none;
                    color: #369;
                    border: none;
                    background: transparent;
                    margin: 0px 0px 0px 0px;
                    padding: 0px 0px 0px 0px;
                    outline: 0;
                }
        
                .limit_text{
                    white-space: nowrap;
                    overflow: hidden;
                    width: 380px;
                    height: 30px;
                    text-overflow: ellipsis; 
                }
            </style>
        
{% endblock %}


{% block pageContent %}
<style>
    input[type="file"] {
  display: block;
}
.imageThumb {
  max-height: 75px;
  border: 2px solid;
  padding: 1px;
  cursor: pointer;
}
.pip {
  display: inline-block;
  margin: 10px 10px 0 0;
}

.remove {
  display: block;
  background: #444;
  border: 1px solid black;
  color: white;
  text-align: center;
  cursor: pointer;
}
.remove:hover {
  background: white;
  color: black;
}
.btn-file {
    position: relative;
    overflow: hidden;
}
.modal-dialog{
    width: 1000px;
}
.btn-file input[type=file] {
    position: absolute;
    top: 0;
    right: 0;
    min-width: 100%;
    min-height: 100%;
    font-size: 100px;
    text-align: right;
    filter: alpha(opacity=0);
    opacity: 0;
    outline: none;
    background: white;
    cursor: inherit;
    display: block;
}
.top_title {
    top: -8px;
}
</style>
<div class="">
    <div class="x_panel">
        <div class="x_title bg-primary">
            <h2 class="pull-right">فرم ثبت</h2>
            <ul class="nav navbar-left panel_toolbox">
                <li>
                    <a class="close-link"><i class="fa fa-close"></i></a>
                </li>
                <li>
                    <a class="collapse-link"><i class="fa fa-chevron-up"></i></a>
                </li>
            </ul>
            <div class="clearfix"></div>
        </div>
        
            <div class="x_content">
                <ul class="nav nav-tabs">
                    <li class="active" ><a id="organPorposTab" data-toggle="tab" href="#organPorpos"> اطلاعات پایه</a></li>
                  </ul>
                  <form action="" method="post" enctype="multipart/form-data" style="background-color: white" novalidate>
                    {% csrf_token %}
                <div class="tab-content" >
                    <div class="clearfix" style="padding: 15px;"></div>
                  <div id="organPorpos" class="tab-pane fade in active">
                    <div class="col-md-6 col-sm-12 col-xs-12 form-group pull-right">
                        <label class="control-label col-md-12 col-sm-12 col-xs-12 pull-right">نام :</label>
                        {{user.first_name}}
                    </div>
                    <div class="col-md-6 col-sm-12 col-xs-12 form-group pull-right">
                        <label class="control-label col-md-12 col-sm-12 col-xs-12 pull-right">نام خانوادگی :</label>
                    {{user.last_name}}
                    </div>
            
                    <div class="col-md-6 col-sm-12 col-xs-12 form-group pull-right">
                        <label class="control-label col-md-12 col-sm-12 col-xs-12 pull-right">نام کاربری :</label>
                        {{user.username}}
                    </div>

                    <div class="col-md-6 col-sm-12 col-xs-12 form-group pull-right">
                        <label class="control-label col-md-5 col-sm-3 col-xs-12 pull-right">کد ملی :</label>
                        {{user.national_code}}
                    </div>
                    <div class="col-md-6 col-sm-12 col-xs-12 form-group pull-right">
                        <label class="control-label col-md-5 col-sm-3 col-xs-12 pull-right">شماره تلفن ۱ :</label>
                        {{user.mobile_number1}}
                    </div>
                    <div class="col-md-6 col-sm-12 col-xs-12 form-group pull-right">
                        <label class="control-label col-md-5 col-sm-3 col-xs-12 pull-right">شماره تلفن ۲ :</label>
                        {{user.mobile_number2}}
                    </div>
                    <div class="col-md-6 col-sm-12 col-xs-12 form-group pull-right">
                        <label class="control-label col-md-12 col-sm-12 col-xs-12 pull-right">تغییر عکس پروفایل :</label>
                        {{user.profile_picture}}
                    </div>
                    <div class="col-md-6 col-sm-12 col-xs-12 form-group pull-right">
                        <label class="control-label col-md-12 col-sm-12 col-xs-12 pull-right">ایمیل :</label>
                        {{user.email}}
                    </div>
                    <div class="col-md-6 col-sm-12 col-xs-12 form-group pull-right">
                        <label class="control-label col-md-12 col-sm-12 col-xs-12 pull-right">تاریخ تولد :</label>
                        <input type="text" class="form-control" id="fromDate1"
                            data-mddatetimepicker="true" data-trigger="click"
                            data-targetselector="#fromDate1" data-groupid="group1" data-fromdate="true"
                            data-enabletimepicker="false" data-placement="right"
                            onchange="datepicker1Change()"
                            >
                        {{user.birthdate}}
                    </div>
                    <div class="col-md-6 col-sm-12 col-xs-12 form-group pull-right">
                        <label class="control-label col-md-12 col-sm-12 col-xs-12 pull-right"> آدرس :</label>
                        {{user.address}}
                    </div>
                    <div class="clearfix"></div>
                  </div>
                    <div class="col-md-3 col-sm-4 col-xs-4 form-group pull-right">
                        <button type="submit" class="btn btn-success">ذخیره</button>
                    </div>
                    

            </div>
            </form>
            {% for field in members_form %}
            {% if field.errors %}
                <div class="alert alert-danger">
                    {{ field.label_tag }} {{ field.errors }}
                </div>
            {% endif %}
        {% endfor %}
        </div>

<!-- Modal -->
  <div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">
            تغییرات شما با موفقیت ثبت شد
        </div>
        <div class="modal-footer">
            <button type="button" class="btn btn-danger" data-dismiss="modal">بستن پنجره</button>
        </div>
      </div>
    </div>
  </div>
    </div>
</div>
{% endblock %}